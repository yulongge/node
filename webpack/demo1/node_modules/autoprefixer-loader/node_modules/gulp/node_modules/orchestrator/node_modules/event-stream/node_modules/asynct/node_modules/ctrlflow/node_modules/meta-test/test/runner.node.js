//runner.asynct.js
var runner = require('../runner')
  , it, is = it = require('it-is')
  , log = console.log
  , helper = require('./lib/helper')
  , platform = require('../platform')
  , path = require('path')

exports ['run a file and make a report'] = function (finish){
  var testFile = path.join(__dirname, '..','examples/test/pass.node.js')

  var cp = runner.run({filename:testFile },helper.try(cb,1000))
  
  function cb(err,report){
    console.log(report)
    it(report)
      .has({
        filename: testFile
      , meta: {adapter: 'node'}
      , tests: is.deepEqual([])
      , failures: is.deepEqual([])
      , status: 'success'
      })
    finish()
  }

  it(cp).has({
    stdout: it.property('on',it.function()),
    stderr: it.property('on',it.function())
  })

}

//*/

function hasError(testFile,check,done){
  testFile = path.join(__dirname, '..',testFile)
  var cp = runner.run({filename:testFile },helper.try(cb,1000))
  
  function cb(err,report){
    it(report)
      .has({
        filename: te