var fs = require('fs'),
    path = require('path'),
    asyncMap = require("slide").asyncMap,
    util = require('util');

var CovHtml = module.exports = function(cov_stats, cov_dir, cb) {
  var index = [];

  asyncMap(
    Object.keys(cov_stats),
    function(f, cb) {
      var st = cov_stats[f],
          missing_lines = st.missing.map(function(l) {
            return l.number;
          }),
          out = '<!doctype html>\n<html lang="en">\n<head>\n  ' +
                '<meta charset="utf-8">\n  <title