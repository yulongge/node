
var Stream = require('stream')
var spec = require('..')

var tests = 0
function pass(message) {
  console.log('ok ' + ++tests, message ? ' -- ' + message : '')
}
function fail(message) {
  console.log('not ok ' + ++tests, message ? ' -- ' + message : '')
}

function checkValid(contract, expectFail) {
  return function (create, test) {
    var stream = create()
    try {
      var validate = contract(stream, spec).validate
      test(stream)
      validate()
    } catch (err) {
      if(!expectFail) {
     